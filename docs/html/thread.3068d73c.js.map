{"mappings":"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","sources":["src/Module/form.ts","src/Module/Comment.ts"],"sourcesContent":["import { db } from \"./firebase\";\r\nimport { ref, onValue, remove, DatabaseReference, push } from \"firebase/database\";\r\nimport { Comment } from \"./Comment\";\r\n\r\nlet userName: string = sessionStorage.getItem('usrName');\r\nlet comments: Comment[] = [];\r\n\r\nconst carsBtn: HTMLButtonElement = document.querySelector('#comment-btn-cars');\r\nconst cars: HTMLTextAreaElement = document.querySelector('#cars');\r\nconst musicBtn: HTMLButtonElement = document.querySelector('#comment-btn-music');\r\nconst music: HTMLTextAreaElement = document.querySelector('#music');\r\nconst foodBtn: HTMLButtonElement = document.querySelector('#comment-btn-food');\r\nconst food: HTMLTextAreaElement = document.querySelector('#food');\r\nconst musicDiv = document.getElementById('music-div') as HTMLDivElement;\r\nconst musik = document.getElementById('Musik') as HTMLButtonElement;\r\nconst carsDiv = document.getElementById('cars-div') as HTMLDivElement;\r\nconst car = document.getElementById('Car') as HTMLButtonElement;\r\nconst foodDiv = document.getElementById('food-div') as HTMLDivElement;\r\nconst Food = document.getElementById('Food') as HTMLButtonElement;\r\n\r\n//Different comment button\r\ncarsBtn.addEventListener('click', (): void => {\r\n    const carRef: DatabaseReference = ref(db, `/Comments/cars`);\r\n    const newKey: string = push(carRef).key;\r\n    new Comment(userName, cars.value, newKey).sendToDb('cars', newKey, carRef)\r\n    fetchCommentData('cars');\r\n})\r\nmusicBtn.addEventListener('click', (): void => {\r\n    const musicRef: DatabaseReference = ref(db, `/Comments/music`);\r\n    const newKey: string = push(musicRef).key;\r\n    new Comment(userName, music.value, newKey).sendToDb('cars', newKey, musicRef);\r\n    fetchCommentData('music');\r\n})\r\nfoodBtn.addEventListener('click', (): void => {\r\n    const foodRef: DatabaseReference = ref(db, `/Comments/food`);\r\n    const newKey: string = push(foodRef).key;\r\n    new Comment(userName, food.value, newKey).sendToDb('cars', newKey, foodRef);\r\n    fetchCommentData('food');\r\n})\r\n\r\n//Styling\r\nmusik.addEventListener('click', (): void => {\r\n    fetchCommentData('music');\r\n    musicDiv.style.display = 'block'\r\n    carsDiv.style.display = 'none'\r\n    foodDiv.style.display = 'none'\r\n})\r\ncar.addEventListener('click', (): void => {\r\n    fetchCommentData('cars');\r\n    carsDiv.style.display = 'block'\r\n    musicDiv.style.display = 'none'\r\n    foodDiv.style.display = 'none'\r\n})\r\nFood.addEventListener('click', (): void => {\r\n    fetchCommentData('food');\r\n    carsDiv.style.display = 'none'\r\n    musicDiv.style.display = 'none'\r\n    foodDiv.style.display = 'block'\r\n})\r\n\r\n//Users can delete there old comments  \r\nfunction deleteComment(subject: string, id: string) {\r\n    const commentH3: HTMLHeadingElement = document.querySelector(`#${id}`);\r\n    commentH3.style.color = 'white';\r\n    commentH3.addEventListener('click', () => {\r\n        const deleteRef: DatabaseReference = ref(db, '/Comments/' + '/' + subject + '/' + id);\r\n        remove(deleteRef);\r\n    })\r\n}\r\n//Fetch data to diffreint subject 'Music-Food-Cars'\r\nfunction fetchCommentData(type: string) {\r\n    const dbRef = ref(db, `/Comments/${type}`);\r\n    onValue(dbRef, (snapshot) => {\r\n        const CommentData = snapshot.val();\r\n        for (const comment of comments) {\r\n            comment.clearDom();\r\n        }\r\n        comments = [];\r\n        for (const key in CommentData) {\r\n            comments.push(new Comment(\r\n                CommentData[key].usrName,\r\n                CommentData[key].comment,\r\n                key\r\n            ));\r\n        }\r\n        for (const comment of comments) {\r\n            comment.displayComment(`#${type}-comments`);\r\n            if (comment.name == userName) { deleteComment(type, comment.id); }\r\n        }\r\n    })\r\n}","import { update, push, ref, DatabaseReference } from \"firebase/database\";\r\n\r\n// Comment Class\r\nexport class Comment {\r\n  constructor(\r\n    public readonly name: string,\r\n    public readonly comment: string,\r\n    public readonly id: string\r\n  ) { }\r\n  public clearDom(): void {\r\n    (document.querySelector(`#${this.id}`) as HTMLHeadingElement).remove();\r\n  }\r\n  //display comment method , it take one parameter which is the div that we will append things till\r\n  public displayComment(divId: string): void {\r\n    const h3: HTMLHeadingElement = document.createElement('h3');\r\n    h3.className = this.name;\r\n    h3.id = this.id;\r\n    h3.innerText = `${this.name}-::: ${this.comment}`;\r\n    document.querySelector(`${divId}`).append(h3);\r\n  }\r\n  //Send the comment to DB, parameters are many so it will work when we send the comment to different subjects\r\n  public sendToDb(subject: string, newKey: string, dbRef: DatabaseReference): void {\r\n    const commentToAdd = {\r\n      usrName: this.name,\r\n      comment: this.comment,\r\n    }\r\n    const newUser = {};\r\n    newUser[newKey] = commentToAdd;\r\n    update(dbRef, newUser);\r\n  }\r\n}"],"names":["$bolz5","parcelRequire","$iLhJC","$c0acc346f61a91d6$export$4d299b491347818a","constructor","name","comment","id","clearDom","document","querySelector","this","remove","displayComment","divId","h3","createElement","className","innerText","append","sendToDb","subject","newKey","dbRef","commentToAdd","usrName","newUser","update","$45e26f3daba7294f$var$userName","sessionStorage","getItem","$45e26f3daba7294f$var$comments","$45e26f3daba7294f$var$carsBtn","$45e26f3daba7294f$var$cars","$45e26f3daba7294f$var$musicBtn","$45e26f3daba7294f$var$music","$45e26f3daba7294f$var$foodBtn","$45e26f3daba7294f$var$food","$45e26f3daba7294f$var$musicDiv","getElementById","$45e26f3daba7294f$var$musik","$45e26f3daba7294f$var$carsDiv","$45e26f3daba7294f$var$car","$45e26f3daba7294f$var$foodDiv","$45e26f3daba7294f$var$Food","$45e26f3daba7294f$var$deleteComment","commentH3","style","color","addEventListener","deleteRef","ref","db","$45e26f3daba7294f$var$fetchCommentData","type","onValue","snapshot","CommentData","val","key","push","comment1","carRef","value","musicRef","foodRef","display"],"version":3,"file":"thread.3068d73c.js.map"}