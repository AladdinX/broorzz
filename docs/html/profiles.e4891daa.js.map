{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCAIA,MAAMC,EAAUC,eAAeC,QAAQ,WACvC,IAAIC,EACAC,EAAmB,GACvB,MAAMC,EAA2BC,EAAAC,IAAIC,EAAAC,GAAI,UAEzCH,EAAAI,QAAQL,GAAQM,IACd,MAAMC,EAAcD,EAASE,MAC7BT,EAAW,GACX,IAAK,MAAMU,KAAOF,EAOhB,GANAR,EAASW,KAAK,IAAIjB,EAAAkB,KACfJ,EAAYE,GAAKG,SAChBL,EAAYE,GAAKI,SACjBN,EAAYE,GAAKK,OACjBP,EAAYE,GAAKM,IACjBR,EAAYE,GAAKO,MACjBrB,GAAWc,EAAK,CAClBX,EAAS,IAAIL,EAAAkB,KACXJ,EAAYE,GAAKG,SACjBL,EAAYE,GAAKI,SACjBN,EAAYE,GAAKK,OACjBP,EAAYE,GAAKM,IACjBR,EAAYE,GAAKO,KACnBlB,EAAOmB,iBAAiB,aACxBnB,EAAOoB,UAAU,eACqBC,SAASC,cAAc,eAClDC,iBAAiB,SAAS,SAAUC,GAC7C,MAAMC,EAAiCtB,EAAAC,IAAIC,EAAAC,GAAI,UAAYN,EAAOc,UAClEX,EAAAuB,OAAOD,GACP3B,eAAe6B,QACfC,SAASC,QAAQ,iBAIvB,IAAK,MAAMC,KAAQ7B,EAAU,CAC3B,IAAI8B,EAAyBV,SAASW,cAAc,MACpDD,EAAGE,UAAYH,EAAKhB,SACpBiB,EAAGG,GAAKJ,EAAKhB,SACbO,SAASC,cAAc,mBAAmBa,OAAOJ,GAEjDV,SAASC,cAAc,IAAIQ,EAAKhB,YAAYS,iBAAiB,SAAS,KACpEO,EAAKX,iBAAiB,aACtBW,EAAKV,UAAU,eACXvB,GAAWiC,EAAKhB,WACjBO,SAASC,cAAc,eAAqCc,MAAMC,QAAU,OAC5EhB,SAASC,cAAc,aAAmCc,MAAMC,QAAU,OAC1EhB,SAASC,cAAc,eAAqCc,MAAMC,QAAU,eAMrFhB,SAASC,cAAc,eAAeC,iBAAiB,SAAS,KAC9DF,SAASC,cAAc,mBAAmBgB,UAAY,GACtDtC,EAAOuC,YACPvC,EAAOoB,UAAU,kBAEnBC,SAASC,cAAc,aAAaC,iBAAiB,SAAS,KAC5DzB,eAAe6B,QACfC,SAASC,QAAQ","sources":["src/Module/profile.ts"],"sourcesContent":["import { User } from \"./User\";\r\nimport { db } from \"./firebase\";\r\nimport { remove, update, push, ref, DatabaseReference, onValue, DataSnapshot } from \"firebase/database\";\r\n\r\nconst usrName = sessionStorage.getItem('usrName');\r\nlet myUser: User;\r\nlet allUsers: User[] = [];\r\nconst dbRef: DatabaseReference = ref(db, '/Users')\r\n//When any changes happened \r\nonValue(dbRef, (snapshot) => {\r\n  const profileData = snapshot.val();\r\n  allUsers = [];\r\n  for (const key in profileData) {\r\n    allUsers.push(new User\r\n      (profileData[key].userName,\r\n        profileData[key].password,\r\n        profileData[key].gender,\r\n        profileData[key].img,\r\n        profileData[key].bio));\r\n    if (usrName == key) {\r\n      myUser = new User(\r\n        profileData[key].userName,\r\n        profileData[key].password,\r\n        profileData[key].gender,\r\n        profileData[key].img,\r\n        profileData[key].bio);\r\n      myUser.createProfileDiv('#main-div');\r\n      myUser.getStatus('#old-status');\r\n      const divDeleter: HTMLButtonElement = document.querySelector('#divDeleter');\r\n      divDeleter.addEventListener('click', function (e) {\r\n        const userDeletor: DatabaseReference = ref(db, '/Users/' + myUser.userName);\r\n        remove(userDeletor)\r\n        sessionStorage.clear();\r\n        location.replace(\"index.html\");\r\n      })\r\n    }\r\n  }\r\n  for (const user of allUsers) {\r\n    let h3: HTMLHeadingElement = document.createElement('h3');\r\n    h3.innerText = user.userName;\r\n    h3.id = user.userName;\r\n    document.querySelector('#profiles-aside').append(h3);\r\n    //when you click on username so you can see the user profile and the old status\r\n    document.querySelector(`#${user.userName}`).addEventListener('click', () => {\r\n      user.createProfileDiv('#main-div')\r\n      user.getStatus('#old-status');\r\n      if (usrName != user.userName) {\r\n        (document.querySelector('#divDeleter') as HTMLButtonElement).style.display = 'none';\r\n        (document.querySelector('#sign-out') as HTMLButtonElement).style.display = 'none';\r\n        (document.querySelector('#new-status') as HTMLButtonElement).style.display = 'none';\r\n      }\r\n    })\r\n  }\r\n})\r\n\r\ndocument.querySelector('#new-status').addEventListener('click', () => {\r\n  document.querySelector('#profiles-aside').innerHTML = '';\r\n  myUser.setStatus();\r\n  myUser.getStatus('#old-status');\r\n})\r\ndocument.querySelector('#sign-out').addEventListener('click', () => {\r\n  sessionStorage.clear();\r\n  location.replace(\"index.html\");\r\n})\r\n\r\n\r\n"],"names":["$fE1Gw","parcelRequire","$f6bd391c4a70d16c$var$usrName","sessionStorage","getItem","$f6bd391c4a70d16c$var$myUser","$f6bd391c4a70d16c$var$allUsers","$f6bd391c4a70d16c$var$dbRef","$iLhJC","ref","$bolz5","db","onValue","snapshot","profileData","val","key","push","User","userName","password","gender","img","bio","createProfileDiv","getStatus","document","querySelector","addEventListener","e","userDeletor","remove","clear","location","replace","user","h3","createElement","innerText","id","append","style","display","innerHTML","setStatus"],"version":3,"file":"profiles.e4891daa.js.map"}